<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.1.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"amjiuzi.gitee.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="有任何建议或疑问,请加 QQ: 1595218767 ,共同探讨学习如R&#x2F;python代码编程作图等方面需要帮忙，欢迎来店咨询 之恒科技, 挥动热情的小爪爪期待你哦  关联规则(AssociationRules)是无监督的机器学习方法,用于知识发现,而非预测关联规则的学习器(learner)无需事先对训练数据进行打标签,因为无监督学习没有训练这个步骤. 缺点是很难对关联规则学习器进行模型评估,一般">
<meta property="og:type" content="article">
<meta property="og:title" content="R语言实现购物篮分析-Apriori和eclat算法">
<meta property="og:url" content="https://amjiuzi.gitee.io/2017/12/04/arules2/index.html">
<meta property="og:site_name" content="不知为不知">
<meta property="og:description" content="有任何建议或疑问,请加 QQ: 1595218767 ,共同探讨学习如R&#x2F;python代码编程作图等方面需要帮忙，欢迎来店咨询 之恒科技, 挥动热情的小爪爪期待你哦  关联规则(AssociationRules)是无监督的机器学习方法,用于知识发现,而非预测关联规则的学习器(learner)无需事先对训练数据进行打标签,因为无监督学习没有训练这个步骤. 缺点是很难对关联规则学习器进行模型评估,一般">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2017/12/03/5a23c84370767.png">
<meta property="og:image" content="https://i.loli.net/2017/11/27/5a1bc20b95e0b.png">
<meta property="og:image" content="https://i.loli.net/2017/11/28/5a1ca5c6914b7.png">
<meta property="og:image" content="https://i.loli.net/2017/11/28/5a1ca5c6919a7.png">
<meta property="og:image" content="https://i.loli.net/2017/12/05/5a2624e6a3563.png">
<meta property="og:image" content="https://i.loli.net/2017/12/05/5a2624e6a3bef.png">
<meta property="og:image" content="https://i.loli.net/2017/12/05/5a2624e699c8d.png">
<meta property="article:published_time" content="2017-12-04T12:02:34.000Z">
<meta property="article:modified_time" content="2020-09-22T09:37:08.808Z">
<meta property="article:author" content="amjiuzi">
<meta property="article:tag" content="R语言">
<meta property="article:tag" content="关联规则">
<meta property="article:tag" content="购物篮分析">
<meta property="article:tag" content="apriori">
<meta property="article:tag" content="eclat">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2017/12/03/5a23c84370767.png">

<link rel="canonical" href="https://amjiuzi.gitee.io/2017/12/04/arules2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>R语言实现购物篮分析-Apriori和eclat算法 | 不知为不知</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">不知为不知</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">鱼跃天门，过而为龙，唯鲤或然</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>文章标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>文章分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>文章目录</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>日程表</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://amjiuzi.gitee.io/2017/12/04/arules2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar1.gif">
      <meta itemprop="name" content="amjiuzi">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="不知为不知">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          R语言实现购物篮分析-Apriori和eclat算法
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-12-04 20:02:34" itemprop="dateCreated datePublished" datetime="2017-12-04T20:02:34+08:00">2017-12-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-09-22 17:37:08" itemprop="dateModified" datetime="2020-09-22T17:37:08+08:00">2020-09-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/R/" itemprop="url" rel="index"><span itemprop="name">R</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/R/Algorithm/" itemprop="url" rel="index"><span itemprop="name">Algorithm</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/R/Algorithm/Classify/" itemprop="url" rel="index"><span itemprop="name">Classify</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>有任何建议或疑问,请加 QQ: 1595218767 ,共同探讨学习<br>如R/python代码编程作图等方面需要帮忙，欢迎来店咨询 <a target="_blank" rel="noopener" href="https://izuoye.taobao.com/">之恒科技</a>, 挥动热情的小爪爪期待你哦 </p>
<p>关联规则(AssociationRules)是无监督的机器学习方法,用于知识发现,而非预测<br>关联规则的学习器(learner)无需事先对训练数据进行打标签,因为无监督学习没有训练这个步骤. 缺点是很难对关联规则学习器进行模型评估,一般都可以通过肉眼观测结果是否合理</p>
<p>关联规则主要用来发现Pattern,最经典的应用是购物篮分析,当然其他类似于购物篮交易数据的案例也可以应用关联规则进行模式发现,如电影推荐/约会网站/药物间的相互副作用/点击流分析等<br>购物篮分析能用来做什么呢？</p>
<ol>
<li>通过关联规则，推出相应的促销礼包或优惠组合套装，快速帮助提高销售额。如前面所说的：飘柔洗发水+玉兰油沐浴露等促销礼包；牛奶+面包、豆奶+面包的早餐组合. </li>
<li>零售超市或商场，可以通过产品关联程度大小，指导产品合理摆放，方便顾客最购买更多其所需要的产品。最常见的就是超市里面购买肉和购买蔬菜水果等货架会摆放得很近，目前就是很多人会同时购买肉与蔬菜，产品的合理摆放也是提高销售的一个关键 </li>
<li>进行相关产品推荐或者挑选相应的关联产品进行精准营销。最常见的是你在亚马逊或京东购买产品的时候，旁边会出现购买该商品的人，有百分之多少还会购买如下的产品，快速帮助顾客找到其共同爱好的产品. 物以类聚，人以群分</li>
<li>寻找更多潜在的目标客户。例如：100人里面，购买A的有60人，购买B的有40人，同时购买A和B的有30人，说明A里面有一半的顾客会购买B，反推而言。如果推出类似B的产品，除了向产品B的用户推荐（因为新产品与B的功能效果比较类似）之外，还可以向A的客户进行推荐，这样就能最大限度地寻找更多的目标客户</li>
</ol>
<a id="more"></a>

<h2 id="原理概念描述"><a href="#原理概念描述" class="headerlink" title="原理概念描述"></a>原理概念描述</h2><p>案例:<br>有10000个消费者购买了商品，其中购买尿布1000个，购买啤酒2000个，购买面包500个，同时购买尿布和啤酒800个，同时购买尿布和面包100个</p>
<h3 id="基础概念"><a href="#基础概念" class="headerlink" title="基础概念"></a>基础概念</h3><ol>
<li>项集<br>购物篮也称为事务数据集,它包含属于同一个项集的项集合<br>在一篮子商品中的一件消费品即为一项(Item),则若干项的集合为项集(items),如{啤酒，尿布}构成一个二元项集</li>
<li>关联规则<br>X为先决条件,Y为相应的关联结果,用于表示数据内隐含的关联性.如:<br>尿布=&gt;啤酒[支持度=8%，置信度=80%]</li>
<li>支持度 Support<br>支持度是指在所有项集中{X, Y}出现的可能性，即项集中同时含有X和Y的概率. 依上例,分析中的全部事务中同时购买了尿布和啤酒的概率是$800/10000=0.08$ 即${尿布-&gt;啤酒}$的支持度为 $8%$<br>该指标作为建立强关联规则的第一个门槛，衡量了所考察关联规则在”量”上的多少</li>
<li>置信度 Confidence<br>置信度表示在先决条件X发生的条件下，关联结果Y发生的概率<br>$$Confidence(X-&gt;Y)=\frac{Support(X \cup Y)}{Support(X)}$$<br>依上例,1000个购买了尿布的同学有800个又购买了啤酒,即${尿布-&gt;啤酒}$的置信度为 $(800/10000)/(1000/10000)= 0.8$<br>这是生成强关联规则的第二个门槛，衡量了所考察的关联规则在“质”上的可靠性</li>
<li>提升度 Lift<br>表示“使用X的用户中同时使用Y的比例”与“使用Y的用户比例”的比值<br>$$<br>\begin {aligned}<br>Lift(X-&gt;Y) &amp;=\frac{Support(X \cup Y)}{Support(X)*Support(Y)} \<br>&amp;=\frac{Support(X \cup Y)}{Support(X)}*\frac{1}{Support(Y)} \<br>&amp;=\frac{Confidence(X,Y)}{Support(Y)}<br>\end {aligned}<br>$$<br>依上例,有1000个童鞋买了尿布,有2000个童鞋买了啤酒,有800个童鞋同时购买了尿布和啤酒,so ${尿布-&gt;啤酒}$的提升度为$((800/10000)/(1000/10000))/(2000/10000)=0.8/0.2=4$<br>该指标与置信度同样衡量规则的可靠性，可以看作是置信度的一种互补指标</li>
<li>出错率 Conviction<br>Conviction的意义在于度量规则预测错误的概率,表示X出现而Y不出现的概率<br>$$Conviction(X-&gt;Y)=\frac{1-Support(Y)}{1-Confidence(X-&gt;Y)}$$<br>依上例,${尿布-&gt;啤酒}$的出错率为$(1-2000/10000)/(1-0.8)=0.8/0.2=4$</li>
</ol>
<p>支持度是一种重要的度量，因为支持度很低的规则可能只是偶然出现，低支持度的规则多半也是无意义的。因此，支持度通常用来删去那些无意义的规则；<br>置信度度量是通过规则进行推理具有可靠性。对于给定的规则X → Y，置信度越高，Y在包含X的事物中出现的可能性就越大。即Y在给定X下的条件概率P(Y|X)越大<br>提升度反映了关联规则中的A与B的相关性，如果提升度=1说明A和B没有任何关联，如果&lt;1，说明A事务和B事务是排斥的，&gt;1，我们认为A和B是有关联的，但是在具体的应用之中，我们认为提升度&gt;3才算作值得认可的关联<br>一个大的提升度值是一个重要的指标，它表明一个规则时很重要的，并反映了商品之间的真实联系<br>三个指标的基本用法,要冲销量,则选择面向基数大的部分,则选择支持度、置信度大的; 随机推荐则用提升度</p>
<h3 id="规则生成基本流程"><a href="#规则生成基本流程" class="headerlink" title="规则生成基本流程"></a>规则生成基本流程</h3><p>一共有2步:</p>
<ol>
<li>找出频繁项集<br>Apriori算法的先验规则:一个频繁项集的所有子集必须也是频繁的.即如果{啤酒,尿布}是频繁集那么{啤酒}{尿布}也得是频繁集,也就是说想要进入后续的规则整理,该商品被采购频率必须大于等于一个阙值(apriori函数里的support参数)<br>n个item,可以产生2^(n- 1)个项集(itemset),指定最小支持度就可以过滤掉非频繁项集,既能减轻计算负荷又能提高预测质量</li>
<li>找出上步中频繁项集的规则.<br>n个item,总共可以产生3^n - 2^(n+1) + 1条规则,指定最小置信度来过滤掉弱规则<br>经过上一步的过滤,剩余的项集已能满足最低支持度.计算各项之间的置信度作为候选规则,讲这些候选规则与最小置信度阙值相比较,不能满足最小置信度的规则将被消除</li>
</ol>
<h2 id="案例应用"><a href="#案例应用" class="headerlink" title="案例应用"></a>案例应用</h2><p>在一个有代表性的超市中,有大量不同的商品,可能有5种品牌的牛奶,一打不同类型的衣物洗涤剂,3种品牌的咖啡…鉴于零售商大小适中,我们假定他不是非常关注寻找特定品牌的牛奶或洗涤剂的规则,于是所有的品牌名称我们都将其略去,值保留其归属的子类别,比如鸡肉,猪肉,冷冻食品,汽水,黄油…</p>
<h3 id="数据读取"><a href="#数据读取" class="headerlink" title="数据读取"></a>数据读取</h3><h4 id="1-read-transactions-函数直接读取"><a href="#1-read-transactions-函数直接读取" class="headerlink" title="1. read.transactions 函数直接读取"></a>1. read.transactions 函数直接读取</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">setwd(<span class="string">&#x27;xx/xx/arules&#x27;</span>)</span><br><span class="line"><span class="keyword">library</span>(arules)</span><br><span class="line"><span class="keyword">library</span>(data.table)</span><br><span class="line"><span class="comment"># --- way1</span></span><br><span class="line">gou1 &lt;- read.transactions(<span class="string">&quot;./groceries.csv&quot;</span>, format=<span class="string">&quot;basket&quot;</span>, sep=<span class="string">&quot;,&quot;</span>,skip=<span class="number">0</span>) </span><br><span class="line"><span class="comment"># 参数说明：</span></span><br><span class="line"><span class="comment"># format=c(&quot;basket&quot;, &quot;single&quot;)用于注明源数据的格式。如果源数据每行内容就是一条交易购买的商品列表（类似于一行就是一个购物篮）那么使用basket；如果每行内容是交易号+单个商品，那么使用single。</span></span><br><span class="line"><span class="comment"># cols=c(&quot;transId&quot;, &quot;ItemId&quot;) 对于single格式，需要指定cols，二元向量（数字或字符串）。如果是字符串，那么文件的第一行是表头（即列名）。第一个元素是交易号的字段名，第二个元素是商品编号的字段名。如果是数字，那么无需表头。对于basket，一般设置为NULL，缺省也是NULL，所以不用指定。</span></span><br><span class="line"><span class="comment"># signle format的数据格式如下所示，与此同时，需要设定cols=c(1, 2)</span></span><br><span class="line"><span class="comment"># 1001,Fries</span></span><br><span class="line"><span class="comment"># 1001,Coffee</span></span><br><span class="line"><span class="comment"># 1001,Milk</span></span><br><span class="line"><span class="comment"># 1002,Coffee</span></span><br><span class="line"><span class="comment"># 1002,Fries</span></span><br><span class="line"><span class="comment"># rm.duplicates=FALSE：表示对于同一交易，是否需要删除重复的商品</span></span><br></pre></td></tr></table></figure>
<p>原始csv存储格式为:<br><img src="https://i.loli.net/2017/12/03/5a23c84370767.png" alt="raw1"></p>
<h4 id="2-as-data-table-’transactions’-函数转化"><a href="#2-as-data-table-’transactions’-函数转化" class="headerlink" title="2. as(data.table,’transactions’) 函数转化"></a>2. as(data.table,’transactions’) 函数转化</h4><h5 id="2-1-若数据存储格式如上图所示也可以通过以下方式读取"><a href="#2-1-若数据存储格式如上图所示也可以通过以下方式读取" class="headerlink" title="2.1 若数据存储格式如上图所示也可以通过以下方式读取"></a>2.1 若数据存储格式如上图所示也可以通过以下方式读取</h5><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">trans1 &lt;- as(lapply(fread(<span class="string">&#x27;./groceries.csv&#x27;</span>,</span><br><span class="line">                          sep=<span class="string">&#x27;\t&#x27;</span>,header = <span class="literal">FALSE</span>)$V1,</span><br><span class="line">                    <span class="keyword">function</span>(x) unlist(strsplit(x,<span class="string">&#x27;,&#x27;</span>))),</span><br><span class="line">             <span class="string">&#x27;transactions&#x27;</span>)</span><br><span class="line">&gt; inspect(trans1)[<span class="number">1</span>:<span class="number">3</span>]</span><br><span class="line">     items                     </span><br><span class="line">[<span class="number">1</span>]  &#123;citrus fruit,            </span><br><span class="line">      margarine,               </span><br><span class="line">      ready soups,             </span><br><span class="line">      semi-finished bread&#125;     </span><br><span class="line">[<span class="number">2</span>]  &#123;coffee,                  </span><br><span class="line">      tropical fruit,          </span><br><span class="line">      yogurt&#125;                  </span><br><span class="line">[<span class="number">3</span>]  &#123;whole milk&#125;       </span><br></pre></td></tr></table></figure>

<h5 id="2-2-若数据存储格式如下图所示"><a href="#2-2-若数据存储格式如下图所示" class="headerlink" title="2.2 若数据存储格式如下图所示"></a>2.2 若数据存储格式如下图所示</h5><p><img src="https://i.loli.net/2017/11/27/5a1bc20b95e0b.png" alt="dt2"></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">trans1 &lt;- as(lapply(interaction(fread(file,sep=<span class="string">&#x27;,&#x27;</span>,header = <span class="literal">TRUE</span>,</span><br><span class="line">                                     col.names = c(<span class="string">&#x27;id1&#x27;</span>,paste(<span class="string">&#x27;info&#x27;</span>,<span class="number">1</span>:ncols_good,sep=<span class="string">&#x27;&#x27;</span>)))[,!<span class="string">&#x27;id1&#x27;</span>],sep=<span class="string">&#x27;,&#x27;</span>),</span><br><span class="line">                    <span class="keyword">function</span>(x) unlist(strsplit(as.character(x),<span class="string">&#x27;,&#x27;</span>))),</span><br><span class="line">             <span class="string">&#x27;transactions&#x27;</span>)</span><br><span class="line">&gt; inspect(trans1)</span><br><span class="line">    items       </span><br><span class="line">[<span class="number">1</span>] &#123;g5,g7,g8&#125;  </span><br><span class="line">[<span class="number">2</span>] &#123;g12,g4,g9&#125; </span><br><span class="line">[<span class="number">3</span>] &#123;g11,g6,g7&#125; </span><br><span class="line">[<span class="number">4</span>] &#123;g15,g22,g9&#125;</span><br><span class="line">[<span class="number">5</span>] &#123;g14,g2,g23&#125;</span><br><span class="line">[<span class="number">6</span>] &#123;g13,g24,g8&#125;</span><br><span class="line">[<span class="number">7</span>] &#123;g11,g25,g3&#125;</span><br></pre></td></tr></table></figure>

<h6 id="2-2-1-list转化"><a href="#2-2-1-list转化" class="headerlink" title="2.2.1 list转化"></a>2.2.1 list转化</h6><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## --- pattern 1</span></span><br><span class="line">&gt; (ls1 &lt;- list(c(<span class="string">&#x27;w1&#x27;</span>,<span class="string">&#x27;w2&#x27;</span>),paste(<span class="string">&#x27;g&#x27;</span>,<span class="number">1</span>:<span class="number">4</span>,sep=<span class="string">&#x27;&#x27;</span>),c(<span class="string">&#x27;h1&#x27;</span>,<span class="string">&#x27;h2&#x27;</span>,<span class="string">&#x27;h8&#x27;</span>)))</span><br><span class="line">[[<span class="number">1</span>]]</span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;w1&quot;</span> <span class="string">&quot;w2&quot;</span></span><br><span class="line"></span><br><span class="line">[[<span class="number">2</span>]]</span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;g1&quot;</span> <span class="string">&quot;g2&quot;</span> <span class="string">&quot;g3&quot;</span> <span class="string">&quot;g4&quot;</span></span><br><span class="line"></span><br><span class="line">[[<span class="number">3</span>]]</span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;h1&quot;</span> <span class="string">&quot;h2&quot;</span> <span class="string">&quot;h8&quot;</span></span><br><span class="line"></span><br><span class="line">&gt; tr1 &lt;- as(ls1,<span class="string">&#x27;transactions&#x27;</span>)</span><br><span class="line">&gt; inspect(tr1)</span><br><span class="line">    items        </span><br><span class="line">[<span class="number">1</span>] &#123;w1,w2&#125;      </span><br><span class="line">[<span class="number">2</span>] &#123;g1,g2,g3,g4&#125;</span><br><span class="line">[<span class="number">3</span>] &#123;h1,h2,h8&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">## --- pattern 2</span></span><br><span class="line">&gt; a1 &lt;- c(<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">&gt; a2 &lt;- c(letters[<span class="number">1</span>:<span class="number">6</span>])</span><br><span class="line">&gt; (dt1 &lt;- data.table::data.table(a1,a2))</span><br><span class="line">   a1 a2</span><br><span class="line"><span class="number">1</span>:  <span class="number">1</span>  a</span><br><span class="line"><span class="number">2</span>:  <span class="number">1</span>  b</span><br><span class="line"><span class="number">3</span>:  <span class="number">2</span>  c</span><br><span class="line"><span class="number">4</span>:  <span class="number">2</span>  d</span><br><span class="line"><span class="number">5</span>:  <span class="number">2</span>  e</span><br><span class="line"><span class="number">6</span>:  <span class="number">3</span>  f</span><br><span class="line">tr2 &lt;- as(split(dt1$a2,dt1$a1),<span class="string">&#x27;transactions&#x27;</span>)</span><br><span class="line">&gt; inspect(tr2)</span><br><span class="line">    items   transactionID</span><br><span class="line">[<span class="number">1</span>] &#123;a,b&#125;   <span class="number">1</span>            </span><br><span class="line">[<span class="number">2</span>] &#123;c,d,e&#125; <span class="number">2</span>            </span><br><span class="line">[<span class="number">3</span>] &#123;f&#125;     <span class="number">3</span> </span><br></pre></td></tr></table></figure>

<h4 id="3-读取速度比较"><a href="#3-读取速度比较" class="headerlink" title="3. 读取速度比较"></a>3. 读取速度比较</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt; groceries</span><br><span class="line">transactions <span class="keyword">in</span> sparse format with</span><br><span class="line"> <span class="number">157360</span> transactions (rows) and</span><br><span class="line"> <span class="number">169</span> items (columns)</span><br><span class="line">&gt; system.time(trans1 &lt;- as(lapply(fread(<span class="string">&#x27;./groceriescopy.csv&#x27;</span>,sep=<span class="string">&#x27;\t&#x27;</span>,header = header)$V1,</span><br><span class="line">                                <span class="keyword">function</span>(x) unlist(strsplit(x,<span class="string">&#x27;,&#x27;</span>))),</span><br><span class="line">                         <span class="string">&#x27;transactions&#x27;</span>))</span><br><span class="line"> 用户  系统  流逝 </span><br><span class="line"><span class="number">17.30</span>  <span class="number">0.03</span> <span class="number">17.34</span> </span><br><span class="line">&gt; system.time(groceries &lt;- read.transactions(<span class="string">&quot;groceriescopy.csv&quot;</span>, format=<span class="string">&quot;basket&quot;</span>, sep=<span class="string">&quot;,&quot;</span>) )</span><br><span class="line"> 用户  系统  流逝 </span><br><span class="line"><span class="number">41.04</span>  <span class="number">0.13</span> <span class="number">41.45</span> </span><br></pre></td></tr></table></figure>

<h3 id="数据集及统计汇总信息查看"><a href="#数据集及统计汇总信息查看" class="headerlink" title="数据集及统计汇总信息查看"></a>数据集及统计汇总信息查看</h3><h4 id="统计信息查看"><a href="#统计信息查看" class="headerlink" title="统计信息查看"></a>统计信息查看</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&gt; summary(groceries)  </span><br><span class="line">transactions as itemMatrix <span class="keyword">in</span> sparse format with  </span><br><span class="line"><span class="number">9835</span> rows (elements/itemsets/transactions) and  </span><br><span class="line"><span class="number">169</span> columns (items) and a density of <span class="number">0.02609146</span>   </span><br><span class="line"></span><br><span class="line">most frequent items:  </span><br><span class="line">  whole milk other vegetables       rolls/buns             soda   </span><br><span class="line"><span class="number">2513</span>             <span class="number">1903</span>             <span class="number">1809</span>             <span class="number">1715</span>   </span><br><span class="line">yogurt          (Other)   </span><br><span class="line"><span class="number">1372</span>            <span class="number">34055</span>   </span><br><span class="line"></span><br><span class="line">element (itemset/transaction) length distribution:  </span><br><span class="line">  sizes  </span><br><span class="line"><span class="number">1</span>    <span class="number">2</span>    <span class="number">3</span>    <span class="number">4</span>    <span class="number">5</span>    <span class="number">6</span>    <span class="number">7</span>    <span class="number">8</span>    <span class="number">9</span>   <span class="number">10</span>   <span class="number">11</span>   <span class="number">12</span>   <span class="number">13</span>   <span class="number">14</span>   <span class="number">15</span>   </span><br><span class="line"><span class="number">2159</span> <span class="number">1643</span> <span class="number">1299</span> <span class="number">1005</span>  <span class="number">855</span>  <span class="number">645</span>  <span class="number">545</span>  <span class="number">438</span>  <span class="number">350</span>  <span class="number">246</span>  <span class="number">182</span>  <span class="number">117</span>   <span class="number">78</span>   <span class="number">77</span>   <span class="number">55</span>   </span><br><span class="line"><span class="number">16</span>   <span class="number">17</span>   <span class="number">18</span>   <span class="number">19</span>   <span class="number">20</span>   <span class="number">21</span>   <span class="number">22</span>   <span class="number">23</span>   <span class="number">24</span>   <span class="number">26</span>   <span class="number">27</span>   <span class="number">28</span>   <span class="number">29</span>   <span class="number">32</span>   </span><br><span class="line"><span class="number">46</span>   <span class="number">29</span>   <span class="number">14</span>   <span class="number">14</span>    <span class="number">9</span>   <span class="number">11</span>    <span class="number">4</span>    <span class="number">6</span>    <span class="number">1</span>    <span class="number">1</span>    <span class="number">1</span>    <span class="number">1</span>    <span class="number">3</span>    <span class="number">1</span>   </span><br><span class="line"></span><br><span class="line">Min. 1st Qu.  Median    Mean 3rd Qu.    Max.   </span><br><span class="line"><span class="number">1.000</span>   <span class="number">2.000</span>   <span class="number">3.000</span>   <span class="number">4.409</span>   <span class="number">6.000</span>  <span class="number">32.000</span>   </span><br><span class="line"></span><br><span class="line">includes extended item information - examples:  </span><br><span class="line">  labels  </span><br><span class="line"><span class="number">1</span> abrasive cleaner  </span><br><span class="line"><span class="number">2</span> artif. sweetener  </span><br><span class="line"><span class="number">3</span>   baby cosmetics </span><br></pre></td></tr></table></figure>
<p>summary的含义：<br>第一段：总共有9835条交易记录transaction,169个商品item. density=0.026表示在稀疏矩阵中1的百分比<br>第二段：最频繁出现的商品item,以及其出现的次数. 可以计算出最大支持度.<br>第三段：每笔交易包含的商品数目,以及其对应的5个分位数和均值的统计信息.如：2159条交易仅包含了1个商品,1643条交易购买了2件商品,一条交易购买了32件商品. 那段统计信息的含义是：第一分位数是2,意味着25%的交易包含不超过2个item. 中位数是3表面50%的交易购买的商品不超过3件. 均值4.4表示所有的交易平均购买4.4件商品<br>第四段：如果数据集包含除了Transaction Id 和 Item之外的其他的列（如，发生交易的时间，用户ID等等），会显示在这里。这个例子，其实没有新的列，labels就是item的名字</p>
<h4 id="购物车数据的稀疏矩阵形式查看"><a href="#购物车数据的稀疏矩阵形式查看" class="headerlink" title="购物车数据的稀疏矩阵形式查看"></a>购物车数据的稀疏矩阵形式查看</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mx1 &lt;- as(groceries,<span class="string">&#x27;matrix&#x27;</span>)</span><br><span class="line">dim(mx1)</span><br><span class="line">[<span class="number">1</span>] <span class="number">9835</span>  <span class="number">169</span></span><br><span class="line">head(mx1[,<span class="number">1</span>:<span class="number">5</span>])</span><br><span class="line">     abrasive cleaner artif. sweetener baby cosmetics baby food  bags</span><br><span class="line">[<span class="number">1</span>,]            <span class="literal">FALSE</span>            <span class="literal">FALSE</span>          <span class="literal">FALSE</span>     <span class="literal">FALSE</span> <span class="literal">FALSE</span></span><br><span class="line">[<span class="number">2</span>,]            <span class="literal">FALSE</span>            <span class="literal">FALSE</span>          <span class="literal">FALSE</span>     <span class="literal">FALSE</span> <span class="literal">FALSE</span></span><br><span class="line">[<span class="number">3</span>,]            <span class="literal">FALSE</span>            <span class="literal">FALSE</span>          <span class="literal">FALSE</span>     <span class="literal">FALSE</span> <span class="literal">FALSE</span></span><br><span class="line">[<span class="number">4</span>,]            <span class="literal">FALSE</span>            <span class="literal">FALSE</span>          <span class="literal">FALSE</span>     <span class="literal">FALSE</span> <span class="literal">FALSE</span></span><br><span class="line">[<span class="number">5</span>,]            <span class="literal">FALSE</span>            <span class="literal">FALSE</span>          <span class="literal">FALSE</span>     <span class="literal">FALSE</span> <span class="literal">FALSE</span></span><br><span class="line">[<span class="number">6</span>,]             <span class="literal">TRUE</span>            <span class="literal">FALSE</span>          <span class="literal">FALSE</span>     <span class="literal">FALSE</span> <span class="literal">FALSE</span></span><br></pre></td></tr></table></figure>

<h4 id="数据集信息进一步查看"><a href="#数据集信息进一步查看" class="headerlink" title="数据集信息进一步查看"></a>数据集信息进一步查看</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&gt; (str(groceries))</span><br><span class="line">Formal class <span class="string">&#x27;transactions&#x27;</span> [package <span class="string">&quot;arules&quot;</span>] with <span class="number">3</span> slots</span><br><span class="line">  ..@ data       :Formal class <span class="string">&#x27;ngCMatrix&#x27;</span> [package <span class="string">&quot;Matrix&quot;</span>] with <span class="number">5</span> slots</span><br><span class="line">  .. .. ..@ i       : int [<span class="number">1</span>:<span class="number">43367</span>] <span class="number">29</span> <span class="number">88</span> <span class="number">118</span> <span class="number">132</span> <span class="number">33</span> <span class="number">157</span> <span class="number">167</span> <span class="number">166</span> <span class="number">38</span> <span class="number">91</span> <span class="keyword">...</span></span><br><span class="line">  .. .. ..@ p       : int [<span class="number">1</span>:<span class="number">9836</span>] <span class="number">0</span> <span class="number">4</span> <span class="number">7</span> <span class="number">8</span> <span class="number">12</span> <span class="number">16</span> <span class="number">21</span> <span class="number">22</span> <span class="number">27</span> <span class="number">28</span> <span class="keyword">...</span></span><br><span class="line">  .. .. ..@ Dim     : int [<span class="number">1</span>:<span class="number">2</span>] <span class="number">169</span> <span class="number">9835</span></span><br><span class="line">  .. .. ..@ Dimnames:List of <span class="number">2</span></span><br><span class="line">  .. .. .. ..$ : <span class="literal">NULL</span></span><br><span class="line">  .. .. .. ..$ : <span class="literal">NULL</span></span><br><span class="line">  .. .. ..@ factors : list()</span><br><span class="line">  ..@ itemInfo   :<span class="string">&#x27;data.frame&#x27;</span>:	<span class="number">169</span> obs. of  <span class="number">1</span> variable:</span><br><span class="line">  .. ..$ labels: chr [<span class="number">1</span>:<span class="number">169</span>] <span class="string">&quot;abrasive cleaner&quot;</span> <span class="string">&quot;artif. sweetener&quot;</span> <span class="string">&quot;baby cosmetics&quot;</span> <span class="string">&quot;baby food&quot;</span> <span class="keyword">...</span></span><br><span class="line">  ..@ itemsetInfo:<span class="string">&#x27;data.frame&#x27;</span>:	<span class="number">0</span> obs. of  <span class="number">0</span> variables</span><br><span class="line"><span class="literal">NULL</span></span><br><span class="line">&gt; (class(groceries))</span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;transactions&quot;</span></span><br><span class="line">attr(,<span class="string">&quot;package&quot;</span>)</span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;arules&quot;</span></span><br><span class="line">&gt; (dim(groceries))</span><br><span class="line">[<span class="number">1</span>] <span class="number">9835</span>  <span class="number">169</span></span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 每个购物list里包含商品的数量 length in each basket(row) </span></span><br><span class="line">&gt; basketSize&lt;-size(groceries)</span><br><span class="line">&gt; table(basketSize)</span><br><span class="line">basketSize</span><br><span class="line">   <span class="number">1</span>    <span class="number">2</span>    <span class="number">3</span>    <span class="number">4</span>    <span class="number">5</span>    <span class="number">6</span>    <span class="number">7</span>    <span class="number">8</span>    <span class="number">9</span>   <span class="number">10</span>   <span class="number">11</span>   <span class="number">12</span>   <span class="number">13</span>   <span class="number">14</span>   <span class="number">15</span>   <span class="number">16</span> </span><br><span class="line"><span class="number">2159</span> <span class="number">1643</span> <span class="number">1299</span> <span class="number">1005</span>  <span class="number">855</span>  <span class="number">645</span>  <span class="number">545</span>  <span class="number">438</span>  <span class="number">350</span>  <span class="number">246</span>  <span class="number">182</span>  <span class="number">117</span>   <span class="number">78</span>   <span class="number">77</span>   <span class="number">55</span>   <span class="number">46</span> </span><br><span class="line">  <span class="number">17</span>   <span class="number">18</span>   <span class="number">19</span>   <span class="number">20</span>   <span class="number">21</span>   <span class="number">22</span>   <span class="number">23</span>   <span class="number">24</span>   <span class="number">26</span>   <span class="number">27</span>   <span class="number">28</span>   <span class="number">29</span>   <span class="number">32</span> </span><br><span class="line">  <span class="number">29</span>   <span class="number">14</span>   <span class="number">14</span>    <span class="number">9</span>   <span class="number">11</span>    <span class="number">4</span>    <span class="number">6</span>    <span class="number">1</span>    <span class="number">1</span>    <span class="number">1</span>    <span class="number">1</span>    <span class="number">3</span>    <span class="number">1</span> </span><br><span class="line"><span class="comment"># 单个商品的出现频率 Support of each item </span></span><br><span class="line">&gt; itemFreq &lt;- itemFrequency(groceries)  </span><br><span class="line">&gt; (head(itemFreq[order(-itemFreq)]))</span><br><span class="line">      whole milk other vegetables       rolls/buns             soda </span><br><span class="line">       <span class="number">0.2555160</span>        <span class="number">0.1934926</span>        <span class="number">0.1839349</span>        <span class="number">0.1743772</span> </span><br><span class="line">          yogurt    bottled water </span><br><span class="line">       <span class="number">0.1395018</span>        <span class="number">0.1105236</span></span><br></pre></td></tr></table></figure>

<h4 id="按最小支持度查看"><a href="#按最小支持度查看" class="headerlink" title="按最小支持度查看"></a>按最小支持度查看</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># itemfreq &gt;= 0.1</span></span><br><span class="line">itemFrequencyPlot(groceries, support= quantile(itemFreq,<span class="number">0.9</span>))  </span><br></pre></td></tr></table></figure>
<p><img src="https://i.loli.net/2017/11/28/5a1ca5c6914b7.png" alt="freq1"></p>
<h4 id="按照支持度的topn查看"><a href="#按照支持度的topn查看" class="headerlink" title="按照支持度的topn查看"></a>按照支持度的topn查看</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># head(itemFreq[order(-itemFreq)],10)</span></span><br><span class="line">itemFrequencyPlot(groceries, topN=<span class="number">10</span>, horiz=<span class="literal">T</span>) </span><br></pre></td></tr></table></figure>
<p><img src="https://i.loli.net/2017/11/28/5a1ca5c6919a7.png" alt="freq2"></p>
<h3 id="有效数据集筛选"><a href="#有效数据集筛选" class="headerlink" title="有效数据集筛选"></a>有效数据集筛选</h3><h4 id="筛选购买两件商品以上的交易"><a href="#筛选购买两件商品以上的交易" class="headerlink" title="筛选购买两件商品以上的交易"></a>筛选购买两件商品以上的交易</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">groceries_use &lt;- groceries[basketSize &gt; <span class="number">1</span>]  </span><br><span class="line">dim(groceries)</span><br><span class="line">[<span class="number">1</span>] <span class="number">9835</span>  <span class="number">169</span>  </span><br><span class="line">dim(groceries_use)  </span><br><span class="line">[<span class="number">1</span>] <span class="number">7676</span>  <span class="number">169</span></span><br></pre></td></tr></table></figure>

<h4 id="查看交易数据"><a href="#查看交易数据" class="headerlink" title="查看交易数据"></a>查看交易数据</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">inspect(groceries[<span class="number">1</span>:<span class="number">3</span>])</span><br><span class="line">    items                </span><br><span class="line">[<span class="number">1</span>] &#123;citrus fruit,       </span><br><span class="line">     margarine,          </span><br><span class="line">     ready soups,        </span><br><span class="line">     semi-finished bread&#125;</span><br><span class="line">[<span class="number">2</span>] &#123;coffee,             </span><br><span class="line">     tropical fruit,     </span><br><span class="line">     yogurt&#125;             </span><br><span class="line">[<span class="number">3</span>] &#123;whole milk&#125;  </span><br></pre></td></tr></table></figure>

<h3 id="关联规则挖掘"><a href="#关联规则挖掘" class="headerlink" title="关联规则挖掘"></a>关联规则挖掘</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">groceryrules &lt;- apriori(groceries, </span><br><span class="line">                        parameter = list(support = <span class="number">0.006</span>, </span><br><span class="line">                                         confidence = <span class="number">0.25</span>, </span><br><span class="line">                                         minlen = <span class="number">2</span>))</span><br></pre></td></tr></table></figure>
<p>这里需要说明下parameter：<br>默认的support=0.1, confidence=0.8, minlen=1, maxlen=10<br>对于minlen，maxlen这里指规则的LHS+RHS的并集的元素个数<br>如果minlen=1，意味着 {} =&gt; {beer}是合法的规则<br>我们往往不需要这种规则，所以需要设定minlen=2</p>
<p>解决支持度设定的一种方法是在考虑一个有趣的模式之前,事先想好需要的最小交易数量. 例如<br>你认为如果某种商品一天被购买2次就可以入法眼, 一个月也就是2x30=60次交易记录,则最小支持度可以计算为 60/9835=0.006即$Support_{min}=N_{item_freq&gt;=2}/nrow(dataset)$<br>置信度阙值从0.25开始,意味着将正确规则完全包含在此结果中,其最低准确率也会使25%</p>
<h4 id="规则统计汇总信息"><a href="#规则统计汇总信息" class="headerlink" title="规则统计汇总信息"></a>规则统计汇总信息</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">summary(groceryrules)</span><br><span class="line">set of <span class="number">463</span> rules</span><br><span class="line"></span><br><span class="line">rule length distribution (lhs + rhs):sizes</span><br><span class="line">  <span class="number">2</span>   <span class="number">3</span>   <span class="number">4</span> </span><br><span class="line"><span class="number">150</span> <span class="number">297</span>  <span class="number">16</span> </span><br><span class="line"></span><br><span class="line">   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span><br><span class="line">  <span class="number">2.000</span>   <span class="number">2.000</span>   <span class="number">3.000</span>   <span class="number">2.711</span>   <span class="number">3.000</span>   <span class="number">4.000</span> </span><br><span class="line"></span><br><span class="line">summary of quality measures:</span><br><span class="line">    support           confidence          lift            count      </span><br><span class="line"> Min.   :<span class="number">0.006101</span>   Min.   :<span class="number">0.2500</span>   Min.   :<span class="number">0.9932</span>   Min.   : <span class="number">60.0</span>  </span><br><span class="line"> 1st Qu.:<span class="number">0.007117</span>   1st Qu.:<span class="number">0.2971</span>   1st Qu.:<span class="number">1.6229</span>   1st Qu.: <span class="number">70.0</span>  </span><br><span class="line"> Median :<span class="number">0.008744</span>   Median :<span class="number">0.3554</span>   Median :<span class="number">1.9332</span>   Median : <span class="number">86.0</span>  </span><br><span class="line"> Mean   :<span class="number">0.011539</span>   Mean   :<span class="number">0.3786</span>   Mean   :<span class="number">2.0351</span>   Mean   :<span class="number">113.5</span>  </span><br><span class="line"> 3rd Qu.:<span class="number">0.012303</span>   3rd Qu.:<span class="number">0.4495</span>   3rd Qu.:<span class="number">2.3565</span>   3rd Qu.:<span class="number">121.0</span>  </span><br><span class="line"> Max.   :<span class="number">0.074835</span>   Max.   :<span class="number">0.6600</span>   Max.   :<span class="number">3.9565</span>   Max.   :<span class="number">736.0</span>  </span><br><span class="line"></span><br><span class="line">mining info:</span><br><span class="line">      data ntransactions support confidence</span><br><span class="line"> groceries          <span class="number">9835</span>   <span class="number">0.006</span>       <span class="number">0.25</span></span><br></pre></td></tr></table></figure>

<h4 id="规则查看"><a href="#规则查看" class="headerlink" title="规则查看"></a>规则查看</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">inspect(groceryrules[<span class="number">1</span>:<span class="number">5</span>])</span><br><span class="line">    lhs                rhs                support     confidence lift     count</span><br><span class="line">[<span class="number">1</span>] &#123;potted plants&#125; =&gt; &#123;whole milk&#125;       <span class="number">0.006914082</span> <span class="number">0.4000000</span>  <span class="number">1.565460</span> <span class="number">68</span>   </span><br><span class="line">[<span class="number">2</span>] &#123;pasta&#125;         =&gt; &#123;whole milk&#125;       <span class="number">0.006100661</span> <span class="number">0.4054054</span>  <span class="number">1.586614</span> <span class="number">60</span>   </span><br><span class="line">[<span class="number">3</span>] &#123;herbs&#125;         =&gt; &#123;root vegetables&#125;  <span class="number">0.007015760</span> <span class="number">0.4312500</span>  <span class="number">3.956477</span> <span class="number">69</span>   </span><br><span class="line">[<span class="number">4</span>] &#123;herbs&#125;         =&gt; &#123;other vegetables&#125; <span class="number">0.007727504</span> <span class="number">0.4750000</span>  <span class="number">2.454874</span> <span class="number">76</span>   </span><br><span class="line">[<span class="number">5</span>] &#123;herbs&#125;         =&gt; &#123;whole milk&#125;       <span class="number">0.007727504</span> <span class="number">0.4750000</span>  <span class="number">1.858983</span> <span class="number">76</span></span><br></pre></td></tr></table></figure>

<h3 id="有用规则提取"><a href="#有用规则提取" class="headerlink" title="有用规则提取"></a>有用规则提取</h3><p>规则可以划分为3大类</p>
<ul>
<li>Actionable  这些rule提供了非常清晰、有用的洞察，可以直接应用在业务上</li>
<li>Trivial  这些rule显而易见，很清晰但是没啥用。属于common sense，如 {尿布} =&gt; {婴儿食品}</li>
<li>Inexplicable  这些rule是不清晰的，难以解释，需要额外的研究来判定是否是有用的rule<br>接下来，我们讨论如何发现有用的rule</li>
</ul>
<h4 id="1-按照-lift-对规则进行排序"><a href="#1-按照-lift-对规则进行排序" class="headerlink" title="1. 按照 lift 对规则进行排序"></a>1. 按照 lift 对规则进行排序</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">ordered_groceryrules &lt;- sort(groceryrules, by=<span class="string">&quot;lift&quot;</span>)</span><br><span class="line">inspect(ordered_groceryrules[<span class="number">1</span>:<span class="number">5</span>])</span><br><span class="line">    lhs                   rhs                support   </span><br><span class="line">[<span class="number">1</span>] &#123;other vegetables&#125; =&gt; &#123;whole milk&#125;       <span class="number">0.07483477</span></span><br><span class="line">[<span class="number">2</span>] &#123;whole milk&#125;       =&gt; &#123;other vegetables&#125; <span class="number">0.07483477</span></span><br><span class="line">[<span class="number">3</span>] &#123;rolls/buns&#125;       =&gt; &#123;whole milk&#125;       <span class="number">0.05663447</span></span><br><span class="line">[<span class="number">4</span>] &#123;yogurt&#125;           =&gt; &#123;whole milk&#125;       <span class="number">0.05602440</span></span><br><span class="line">[<span class="number">5</span>] &#123;root vegetables&#125;  =&gt; &#123;whole milk&#125;       <span class="number">0.04890696</span></span><br><span class="line">    confidence lift     count</span><br><span class="line">[<span class="number">1</span>] <span class="number">0.3867578</span>  <span class="number">1.513634</span> <span class="number">736</span>  </span><br><span class="line">[<span class="number">2</span>] <span class="number">0.2928770</span>  <span class="number">1.513634</span> <span class="number">736</span>  </span><br><span class="line">[<span class="number">3</span>] <span class="number">0.3079049</span>  <span class="number">1.205032</span> <span class="number">557</span>  </span><br><span class="line">[<span class="number">4</span>] <span class="number">0.4016035</span>  <span class="number">1.571735</span> <span class="number">551</span>  </span><br><span class="line">[<span class="number">5</span>] <span class="number">0.4486940</span>  <span class="number">1.756031</span> <span class="number">481</span>  </span><br><span class="line"></span><br><span class="line">groceryrules@quality$lift2 &lt;- floor(groceryrules@quality$lift*<span class="number">100</span>)/<span class="number">100</span></span><br><span class="line">ordered_groceryrules2 &lt;- sort(groceryrules, by=c(<span class="string">&quot;lift2&quot;</span>,<span class="string">&#x27;support&#x27;</span>))</span><br><span class="line">inspect(ordered_groceryrules2[<span class="number">11</span>:<span class="number">16</span>])</span><br><span class="line">    lhs                                             rhs               support    </span><br><span class="line">[<span class="number">1</span>] &#123;other vegetables,whole milk,yogurt&#125;         =&gt; &#123;root vegetables&#125; <span class="number">0.007829181</span></span><br><span class="line">[<span class="number">2</span>] &#123;tropical fruit,whipped/sour cream&#125;          =&gt; &#123;yogurt&#125;          <span class="number">0.006202339</span></span><br><span class="line">[<span class="number">3</span>] &#123;other vegetables,tropical fruit,whole milk&#125; =&gt; &#123;yogurt&#125;          <span class="number">0.007625826</span></span><br><span class="line">[<span class="number">4</span>] &#123;other vegetables,rolls/buns,whole milk&#125;     =&gt; &#123;root vegetables&#125; <span class="number">0.006202339</span></span><br><span class="line">[<span class="number">5</span>] &#123;other vegetables,tropical fruit&#125;            =&gt; &#123;root vegetables&#125; <span class="number">0.012302999</span></span><br><span class="line">[<span class="number">6</span>] &#123;frozen vegetables,other vegetables&#125;         =&gt; &#123;root vegetables&#125; <span class="number">0.006100661</span></span><br><span class="line">    confidence lift     count lift2</span><br><span class="line">[<span class="number">1</span>] <span class="number">0.3515982</span>  <span class="number">3.225716</span>  <span class="number">77</span>   <span class="number">3.22</span> </span><br><span class="line">[<span class="number">2</span>] <span class="number">0.4485294</span>  <span class="number">3.215224</span>  <span class="number">61</span>   <span class="number">3.21</span> </span><br><span class="line">[<span class="number">3</span>] <span class="number">0.4464286</span>  <span class="number">3.200164</span>  <span class="number">75</span>   <span class="number">3.20</span> </span><br><span class="line">[<span class="number">4</span>] <span class="number">0.3465909</span>  <span class="number">3.179778</span>  <span class="number">61</span>   <span class="number">3.17</span> </span><br><span class="line">[<span class="number">5</span>] <span class="number">0.3427762</span>  <span class="number">3.144780</span> <span class="number">121</span>   <span class="number">3.14</span> </span><br><span class="line">[<span class="number">6</span>] <span class="number">0.3428571</span>  <span class="number">3.145522</span>  <span class="number">60</span>   <span class="number">3.14</span> </span><br></pre></td></tr></table></figure>

<h4 id="2-规则搜索"><a href="#2-规则搜索" class="headerlink" title="2. 规则搜索"></a>2. 规则搜索</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">yogurtrules &lt;- subset(groceryrules, items %<span class="keyword">in</span>% c(<span class="string">&quot;yogurt&quot;</span>)) </span><br><span class="line">inspect(yogurtrules[<span class="number">1</span>:<span class="number">3</span>])</span><br><span class="line">    lhs              rhs      support     confidence lift     count lift2</span><br><span class="line">[<span class="number">1</span>] &#123;cat food&#125;    =&gt; &#123;yogurt&#125; <span class="number">0.006202339</span> <span class="number">0.2663755</span>  <span class="number">1.909478</span> <span class="number">61</span>    <span class="number">1.90</span> </span><br><span class="line">[<span class="number">2</span>] &#123;hard cheese&#125; =&gt; &#123;yogurt&#125; <span class="number">0.006405694</span> <span class="number">0.2614108</span>  <span class="number">1.873889</span> <span class="number">63</span>    <span class="number">1.87</span> </span><br><span class="line">[<span class="number">3</span>] &#123;butter milk&#125; =&gt; &#123;yogurt&#125; <span class="number">0.008540925</span> <span class="number">0.3054545</span>  <span class="number">2.189610</span> <span class="number">84</span>    <span class="number">2.18</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>items %in% c(“A”, “B”)表示 lhs+rhs的项集并集中，至少有一个item是在c(“A”, “B”)  item = A or item = B<br>如果仅仅想搜索lhs或者rhs，那么用lhs或rhs替换items即可。如：lhs %in% c(“yogurt”)<br>%in%是精确匹配<br>%pin%是部分匹配，也就是说只要item like ‘%A%’ or item like ‘%B%’<br>%ain%是完全匹配，也就是说itemset has ’A’ and itemset has ‘B’</p>
<h4 id="3-通过-条件运算符-amp-添加-support-confidence-lift的过滤条件"><a href="#3-通过-条件运算符-amp-添加-support-confidence-lift的过滤条件" class="headerlink" title="3. 通过 条件运算符(&amp;, |, !) 添加 support, confidence, lift的过滤条件"></a>3. 通过 条件运算符(&amp;, |, !) 添加 support, confidence, lift的过滤条件</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">fruitrules &lt;- subset(groceryrules, items %pin% c(<span class="string">&quot;fruit&quot;</span>))  </span><br><span class="line">inspect(sort(yogurtrules[<span class="number">1</span>:<span class="number">3</span>],by=c(<span class="string">&#x27;lift2&#x27;</span>,<span class="string">&#x27;support&#x27;</span>)))</span><br><span class="line">    lhs                        rhs              support     confidence lift     count lift2</span><br><span class="line">[<span class="number">1</span>] &#123;grapes&#125;                =&gt; &#123;tropical fruit&#125; <span class="number">0.006100661</span> <span class="number">0.2727273</span>  <span class="number">2.599101</span>  <span class="number">60</span>   <span class="number">2.59</span> </span><br><span class="line">[<span class="number">2</span>] &#123;fruit/vegetable juice&#125; =&gt; &#123;soda&#125;           <span class="number">0.018403660</span> <span class="number">0.2545710</span>  <span class="number">1.459887</span> <span class="number">181</span>   <span class="number">1.45</span> </span><br><span class="line">[<span class="number">3</span>] &#123;fruit/vegetable juice&#125; =&gt; &#123;yogurt&#125;         <span class="number">0.018708693</span> <span class="number">0.2587904</span>  <span class="number">1.855105</span> <span class="number">184</span>   <span class="number">1.85</span> </span><br><span class="line"></span><br><span class="line">byrules &lt;- subset(groceryrules, items %ain% c(<span class="string">&quot;berries&quot;</span>))  </span><br><span class="line">inspect(byrules[<span class="number">1</span>:<span class="number">3</span>])</span><br><span class="line">    lhs          rhs                  support     confidence lift     count lift2</span><br><span class="line">[<span class="number">1</span>] &#123;berries&#125; =&gt; &#123;whipped/sour cream&#125; <span class="number">0.009049314</span> <span class="number">0.2721713</span>  <span class="number">3.796886</span>  <span class="number">89</span>   <span class="number">3.79</span> </span><br><span class="line">[<span class="number">2</span>] &#123;berries&#125; =&gt; &#123;yogurt&#125;             <span class="number">0.010574479</span> <span class="number">0.3180428</span>  <span class="number">2.279848</span> <span class="number">104</span>   <span class="number">2.27</span> </span><br><span class="line">[<span class="number">3</span>] &#123;berries&#125; =&gt; &#123;other vegetables&#125;   <span class="number">0.010269446</span> <span class="number">0.3088685</span>  <span class="number">1.596280</span> <span class="number">101</span>   <span class="number">1.59</span> </span><br><span class="line"></span><br><span class="line">fruitrules &lt;- subset(groceryrules, items %pin% c(<span class="string">&quot;fruit&quot;</span>) &amp; lift &gt; <span class="number">2</span>)</span><br><span class="line">inspect(fruitrules[<span class="number">1</span>:<span class="number">3</span>])</span><br><span class="line">    lhs                 rhs              support     confidence lift     count lift2</span><br><span class="line">[<span class="number">1</span>] &#123;grapes&#125;         =&gt; &#123;tropical fruit&#125; <span class="number">0.006100661</span> <span class="number">0.2727273</span>  <span class="number">2.599101</span>  <span class="number">60</span>   <span class="number">2.59</span> </span><br><span class="line">[<span class="number">2</span>] &#123;pip fruit&#125;      =&gt; &#123;tropical fruit&#125; <span class="number">0.020437214</span> <span class="number">0.2701613</span>  <span class="number">2.574648</span> <span class="number">201</span>   <span class="number">2.57</span> </span><br><span class="line">[<span class="number">3</span>] &#123;tropical fruit&#125; =&gt; &#123;yogurt&#125;         <span class="number">0.029283172</span> <span class="number">0.2790698</span>  <span class="number">2.000475</span> <span class="number">288</span>   <span class="number">2.00</span> </span><br></pre></td></tr></table></figure>

<h4 id="4-获取出support-confidence-lift外的其他评价标准"><a href="#4-获取出support-confidence-lift外的其他评价标准" class="headerlink" title="4. 获取出support,confidence,lift外的其他评价标准"></a>4. 获取出support,confidence,lift外的其他评价标准</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">qualityMeasures &lt;- interestMeasure(groceryrules, </span><br><span class="line">                                   measure = c(<span class="string">&quot;coverage&quot;</span>,<span class="string">&quot;fishersExactTest&quot;</span>,</span><br><span class="line">                                            <span class="string">&quot;conviction&quot;</span>, <span class="string">&quot;chiSquared&quot;</span>), </span><br><span class="line">                                   transactions=groceries_use)</span><br><span class="line">summary(qualityMeasures)</span><br><span class="line">    coverage        fishersExactTest      conviction       chiSquared      </span><br><span class="line"> Min.   :<span class="number">0.009964</span>   Min.   :<span class="number">0.0000000</span>   Min.   :<span class="number">0.9977</span>   Min.   :  <span class="number">0.0106</span>  </span><br><span class="line"> 1st Qu.:<span class="number">0.018709</span>   1st Qu.:<span class="number">0.0000000</span>   1st Qu.:<span class="number">1.1914</span>   1st Qu.: <span class="number">25.0673</span>  </span><br><span class="line"> Median :<span class="number">0.024809</span>   Median :<span class="number">0.0000000</span>   Median :<span class="number">1.2695</span>   Median : <span class="number">45.6076</span>  </span><br><span class="line"> Mean   :<span class="number">0.032608</span>   Mean   :<span class="number">0.0068474</span>   Mean   :<span class="number">1.3245</span>   Mean   : <span class="number">54.9651</span>  </span><br><span class="line"> 3rd Qu.:<span class="number">0.035892</span>   3rd Qu.:<span class="number">0.0000026</span>   3rd Qu.:<span class="number">1.4091</span>   3rd Qu.: <span class="number">75.8146</span>  </span><br><span class="line"> Max.   :<span class="number">0.255516</span>   Max.   :<span class="number">0.5881507</span>   Max.   :<span class="number">2.1897</span>   Max.   :<span class="number">350.0989</span>  </span><br><span class="line"></span><br><span class="line">quality(groceryrules) &lt;- cbind(quality(groceryrules), qualityMeasures)  </span><br><span class="line">inspect(head(sort(groceryrules, by = <span class="string">&quot;conviction&quot;</span>, decreasing = <span class="literal">F</span>))) </span><br><span class="line">    lhs                      rhs          support     confidence lift      count lift2</span><br><span class="line">[<span class="number">1</span>] &#123;bottled beer&#125;        =&gt; &#123;whole milk&#125; <span class="number">0.020437214</span> <span class="number">0.2537879</span>  <span class="number">0.9932367</span> <span class="number">201</span>   <span class="number">0.99</span> </span><br><span class="line">[<span class="number">2</span>] &#123;bottled water,soda&#125;  =&gt; &#123;whole milk&#125; <span class="number">0.007524148</span> <span class="number">0.2596491</span>  <span class="number">1.0161755</span>  <span class="number">74</span>   <span class="number">1.01</span> </span><br><span class="line">[<span class="number">3</span>] &#123;beverages&#125;           =&gt; &#123;whole milk&#125; <span class="number">0.006812405</span> <span class="number">0.2617188</span>  <span class="number">1.0242753</span>  <span class="number">67</span>   <span class="number">1.02</span> </span><br><span class="line">[<span class="number">4</span>] &#123;specialty chocolate&#125; =&gt; &#123;whole milk&#125; <span class="number">0.008032537</span> <span class="number">0.2642140</span>  <span class="number">1.0340410</span>  <span class="number">79</span>   <span class="number">1.03</span> </span><br><span class="line">[<span class="number">5</span>] &#123;candy&#125;               =&gt; &#123;whole milk&#125; <span class="number">0.008235892</span> <span class="number">0.2755102</span>  <span class="number">1.0782502</span>  <span class="number">81</span>   <span class="number">1.07</span> </span><br><span class="line">[<span class="number">6</span>] &#123;sausage,soda&#125;        =&gt; &#123;whole milk&#125; <span class="number">0.006710727</span> <span class="number">0.2761506</span>  <span class="number">1.0807566</span>  <span class="number">66</span>   <span class="number">1.08</span> </span><br><span class="line">    coverage   fishersExactTest conviction chiSquared</span><br><span class="line">[<span class="number">1</span>] <span class="number">0.08052872</span> <span class="number">0.5881507</span>        <span class="number">0.9976841</span>  <span class="number">0.01055431</span></span><br><span class="line">[<span class="number">2</span>] <span class="number">0.02897814</span> <span class="number">0.5085760</span>        <span class="number">1.0055826</span>  <span class="number">0.02057106</span></span><br><span class="line">[<span class="number">3</span>] <span class="number">0.02602949</span> <span class="number">0.4684027</span>        <span class="number">1.0084016</span>  <span class="number">0.04149042</span></span><br><span class="line">[<span class="number">4</span>] <span class="number">0.03040163</span> <span class="number">0.4363886</span>        <span class="number">1.0118214</span>  <span class="number">0.09572128</span></span><br><span class="line">[<span class="number">5</span>] <span class="number">0.02989324</span> <span class="number">0.2669417</span>        <span class="number">1.0275976</span>  <span class="number">0.49707571</span></span><br><span class="line">[<span class="number">6</span>] <span class="number">0.02430097</span> <span class="number">0.3180790</span>        <span class="number">1.0285068</span>  <span class="number">0.42791924</span></span><br></pre></td></tr></table></figure>

<p>第三个参数transactions：一般情况下都是原来那个数据集，但也有可能是其它数据集，用于检验这些rules在其他数据集上的效果。所以，这也是评估rules的一种方法：在其它数据集上计算这些规则的quality measure用以评估效果。<br>fishersExactTest 的p值大部分都是 &gt;= 0.05, 这就说明这些规则反应出了真实的用户的行为模式。<br>coverage从0.01 ~ 0.30，相当于覆盖到了多少范围的用户。<br>ChiSquared: 考察该规则的LHS和RHS是否独立？即LHS与RHS的列联表的ChiSquare Test。p&lt;0.05表示独立，否则表示不独立。</p>
<h4 id="限制挖掘的item"><a href="#限制挖掘的item" class="headerlink" title="限制挖掘的item"></a>限制挖掘的item</h4><p>可以控制规则的左手边或者右手边出现的item，即appearance。但尽量要放低支持度和置信度</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">&gt; berriesInLHS &lt;- apriori(groceries, </span><br><span class="line">                        parameter = list( support = <span class="number">0.003</span>, </span><br><span class="line">                                          confidence = <span class="number">0.1</span>,</span><br><span class="line">                                          minlen=<span class="number">2</span>), </span><br><span class="line">                        appearance = list(lhs = c(<span class="string">&quot;berries&quot;</span>), </span><br><span class="line">                                          default=<span class="string">&quot;rhs&quot;</span>))</span><br><span class="line">&gt; summary(berriesInLHS)</span><br><span class="line">set of <span class="number">18</span> rules</span><br><span class="line"></span><br><span class="line">rule length distribution (lhs + rhs):sizes</span><br><span class="line"> <span class="number">2</span> </span><br><span class="line"><span class="number">18</span> </span><br><span class="line"></span><br><span class="line">   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span><br><span class="line">      <span class="number">2</span>       <span class="number">2</span>       <span class="number">2</span>       <span class="number">2</span>       <span class="number">2</span>       <span class="number">2</span> </span><br><span class="line"></span><br><span class="line">summary of quality measures:</span><br><span class="line">    support           confidence          lift           count       </span><br><span class="line"> Min.   :<span class="number">0.003660</span>   Min.   :<span class="number">0.1101</span>   Min.   :<span class="number">1.081</span>   Min.   : <span class="number">36.00</span>  </span><br><span class="line"> 1st Qu.:<span class="number">0.004118</span>   1st Qu.:<span class="number">0.1239</span>   1st Qu.:<span class="number">1.457</span>   1st Qu.: <span class="number">40.50</span>  </span><br><span class="line"> Median :<span class="number">0.005186</span>   Median :<span class="number">0.1560</span>   Median :<span class="number">1.596</span>   Median : <span class="number">51.00</span>  </span><br><span class="line"> Mean   :<span class="number">0.006231</span>   Mean   :<span class="number">0.1874</span>   Mean   :<span class="number">1.791</span>   Mean   : <span class="number">61.28</span>  </span><br><span class="line"> 3rd Qu.:<span class="number">0.007168</span>   3rd Qu.:<span class="number">0.2156</span>   3rd Qu.:<span class="number">1.950</span>   3rd Qu.: <span class="number">70.50</span>  </span><br><span class="line"> Max.   :<span class="number">0.011795</span>   Max.   :<span class="number">0.3547</span>   Max.   :<span class="number">3.797</span>   Max.   :<span class="number">116.00</span>  </span><br><span class="line"></span><br><span class="line">mining info:</span><br><span class="line">      data ntransactions support confidence</span><br><span class="line"> groceries          <span class="number">9835</span>   <span class="number">0.003</span>        <span class="number">0.1</span></span><br><span class="line"></span><br><span class="line">&gt; inspect(berriesInLHS[<span class="number">1</span>:<span class="number">5</span>]) </span><br><span class="line">    lhs          rhs                     support     confidence lift    </span><br><span class="line">[<span class="number">1</span>] &#123;berries&#125; =&gt; &#123;beef&#125;                  <span class="number">0.004473818</span> <span class="number">0.1345566</span>  <span class="number">2.564659</span></span><br><span class="line">[<span class="number">2</span>] &#123;berries&#125; =&gt; &#123;butter&#125;                <span class="number">0.003762074</span> <span class="number">0.1131498</span>  <span class="number">2.041888</span></span><br><span class="line">[<span class="number">3</span>] &#123;berries&#125; =&gt; &#123;domestic eggs&#125;         <span class="number">0.003863752</span> <span class="number">0.1162080</span>  <span class="number">1.831579</span></span><br><span class="line">[<span class="number">4</span>] &#123;berries&#125; =&gt; &#123;fruit/vegetable juice&#125; <span class="number">0.003660397</span> <span class="number">0.1100917</span>  <span class="number">1.522858</span></span><br><span class="line">[<span class="number">5</span>] &#123;berries&#125; =&gt; &#123;whipped/sour cream&#125;    <span class="number">0.009049314</span> <span class="number">0.2721713</span>  <span class="number">3.796886</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 既然lhs都是&quot;berries&quot;，那么只查看rhs的itemset即可</span></span><br><span class="line">&gt; inspect(rhs(berriesInLHS[<span class="number">1</span>:<span class="number">5</span>]))</span><br><span class="line">    items                  </span><br><span class="line">[<span class="number">1</span>] &#123;beef&#125;                 </span><br><span class="line">[<span class="number">2</span>] &#123;butter&#125;               </span><br><span class="line">[<span class="number">3</span>] &#123;domestic eggs&#125;        </span><br><span class="line">[<span class="number">4</span>] &#123;fruit/vegetable juice&#125;</span><br><span class="line">[<span class="number">5</span>] &#123;whipped/sour cream&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用subset进行进一步过滤. 如,不希望看到rhs包含&quot;root vegetables&quot; 或 &quot;whole milk&quot;</span></span><br><span class="line">&gt; berrySub &lt;- subset(berriesInLHS, subset = !(rhs %<span class="keyword">in</span>% c(<span class="string">&quot;root vegetables&quot;</span>, <span class="string">&quot;whole milk&quot;</span>)))</span><br><span class="line">&gt; inspect(sort(berrySub, by=<span class="string">&quot;confidence&quot;</span>)[<span class="number">1</span>:<span class="number">5</span>])</span><br><span class="line">    lhs          rhs                  support     confidence lift     count</span><br><span class="line">[<span class="number">1</span>] &#123;berries&#125; =&gt; &#123;yogurt&#125;             <span class="number">0.013548723</span> <span class="number">0.3280757</span>  <span class="number">1.890622</span>  <span class="number">104</span> </span><br><span class="line">[<span class="number">2</span>] &#123;berries&#125; =&gt; &#123;other vegetables&#125;   <span class="number">0.013157895</span> <span class="number">0.3186120</span>  <span class="number">1.328444</span>  <span class="number">101</span> </span><br><span class="line">[<span class="number">3</span>] &#123;berries&#125; =&gt; &#123;whipped/sour cream&#125; <span class="number">0.011594581</span> <span class="number">0.2807571</span>  <span class="number">3.173920</span>   <span class="number">89</span> </span><br><span class="line">[<span class="number">4</span>] &#123;&#125;        =&gt; &#123;other vegetables&#125;   <span class="number">0.239838458</span> <span class="number">0.2398385</span>  <span class="number">1.000000</span> <span class="number">1841</span> </span><br><span class="line">[<span class="number">5</span>] &#123;berries&#125; =&gt; &#123;soda&#125;               <span class="number">0.009379885</span> <span class="number">0.2271293</span>  <span class="number">1.118310</span>   <span class="number">72</span> </span><br><span class="line">&gt; inspect(rhs(sort(berrySub, by=<span class="string">&quot;confidence&quot;</span>)[<span class="number">1</span>:<span class="number">5</span>]))</span><br><span class="line">    items               </span><br><span class="line">[<span class="number">1</span>] &#123;yogurt&#125;            </span><br><span class="line">[<span class="number">2</span>] &#123;other vegetables&#125;  </span><br><span class="line">[<span class="number">3</span>] &#123;whipped/sour cream&#125;</span><br><span class="line">[<span class="number">4</span>] &#123;other vegetables&#125;  </span><br><span class="line">[<span class="number">5</span>] &#123;soda&#125; </span><br></pre></td></tr></table></figure>

<h3 id="保存挖掘的结果"><a href="#保存挖掘的结果" class="headerlink" title="保存挖掘的结果"></a>保存挖掘的结果</h3><p>有两种使用场景</p>
<p>第一，保存到文件。可以与外部程序进行交换。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; write(groceryrules, file=<span class="string">&quot;./groceryrules.csv&quot;</span>, sep=<span class="string">&quot;,&quot;</span>, quote=<span class="literal">TRUE</span>, row.names=<span class="literal">FALSE</span>)  </span><br></pre></td></tr></table></figure>
<p>第二，转换为data frame，然后再进行进一步的处理。处理完的结果可以保存到外部文件或者数据库。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; groceryrules_df &lt;- as(groceryrules, <span class="string">&quot;data.frame&quot;</span>)  </span><br><span class="line">&gt; str(groceryrules_df)  </span><br></pre></td></tr></table></figure>

<h3 id="图形展示"><a href="#图形展示" class="headerlink" title="图形展示"></a>图形展示</h3><h4 id="1-Scatter-Plot"><a href="#1-Scatter-Plot" class="headerlink" title="1. Scatter Plot"></a>1. Scatter Plot</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">library</span>(arulesViz)</span><br><span class="line">&gt; <span class="keyword">library</span>(RColorBrewer)</span><br><span class="line">&gt; plot(groceryrules,</span><br><span class="line">     control=list(jitter=<span class="number">2</span>,col=rev(brewer.pal(<span class="number">9</span>, <span class="string">&quot;Greens&quot;</span>)[<span class="number">4</span>:<span class="number">9</span>])),</span><br><span class="line">     shading = <span class="string">&#x27;lift&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://i.loli.net/2017/12/05/5a2624e6a3563.png" alt="scat1"></p>
<p>shading = “lift”： 表示在散点图上颜色深浅的度量是lift。当然也可以设置为support 或者Confidence<br>jitter=2：增加抖动值<br>col: 调色板，默认是100个颜色的灰色调色板<br>brewer.pal(n, name): 创建调色板：n表示该调色板内总共有多少种颜色；name表示调色板的名字(参考help)<br>这里使用Green这块调色板，引入9中颜色<br>这幅散点图表示了规则的分布图：大部分规则的support在0.1以内，Confidence在0-0.8内。每个点的颜色深浅代表了lift的值</p>
<h4 id="2-Grouped-Matrix"><a href="#2-Grouped-Matrix" class="headerlink" title="2. Grouped Matrix"></a>2. Grouped Matrix</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plot(groceryrules,method=<span class="string">&#x27;grouped&#x27;</span>,</span><br><span class="line">     control = list(col=rev(brewer.pal(<span class="number">9</span>, <span class="string">&quot;Greens&quot;</span>)[<span class="number">4</span>:<span class="number">9</span>])))</span><br></pre></td></tr></table></figure>
<p><img src="https://i.loli.net/2017/12/05/5a2624e6a3bef.png" alt="mx_gro"></p>
<h4 id="3-Graph"><a href="#3-Graph" class="headerlink" title="3. Graph"></a>3. Graph</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">top.vegie.rules &lt;- sort(groceryrules,</span><br><span class="line">                        by=c(<span class="string">&#x27;support&#x27;</span>,<span class="string">&#x27;lift&#x27;</span>))[<span class="number">1</span>:<span class="number">10</span>]</span><br><span class="line">plot(top.vegie.rules, measure=<span class="string">&quot;support&quot;</span>, </span><br><span class="line">     method=<span class="string">&quot;graph&quot;</span>,</span><br><span class="line">     shading = <span class="string">&quot;lift&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://i.loli.net/2017/12/05/5a2624e699c8d.png" alt="gra_gro"></p>
<h3 id="购物篮分析的结果应用"><a href="#购物篮分析的结果应用" class="headerlink" title="购物篮分析的结果应用"></a>购物篮分析的结果应用</h3><ol>
<li>通过商品合并购买来揣测我的用户。通过商品 [1级品类] 的购物篮分析，发现用户经常购买的是水果和乳品,这两款品种十分契合下午茶场景,说明我们的用户群体中,是办公室白领、比较喜欢下午茶的人群比例有多少; 其次是果蔬+乳品，这两款品种十分契合居家生活场景，说明在我们的用户群体中，做饭居家的用户比例有多少. 这只是给公司各级别的同事一个基础的数据概念</li>
<li>有了这些数据佐证,我们一方面可以告诉运营在这几类商品品种(itemFreq)上,不断扩品和扩类,另一方面可以指导运营,在合适的时间(下午茶时间和下班买菜时间)进行合适的品类秒杀和促销 </li>
<li>优惠券策略。如果要发放优惠券撬动销售额，那么发放什么品类优惠券合适？如果要进行促销，那么促销品中加入哪款商品能促进该促销品的销售? max(support)</li>
<li>如果运营要制定下午茶活动,或者是菜市场活动,选那些品比较合适？为什么要制定这么场景类的活动？</li>
<li>根据起飞价，来制定爆款品定价，坚决不让爆款品组合刚好够起飞价</li>
</ol>
<h3 id="使用eclat-函数获取捆绑销售的产品组合"><a href="#使用eclat-函数获取捆绑销售的产品组合" class="headerlink" title="使用eclat()函数获取捆绑销售的产品组合"></a>使用eclat()函数获取捆绑销售的产品组合</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&gt; eclat1 &lt;- eclat(groceries,</span><br><span class="line">                parameter = list(minlen=<span class="number">2</span>,maxlen=<span class="number">3</span>,</span><br><span class="line">                                 support=<span class="number">0.006</span>,target = <span class="string">&#x27;frequent itemsets&#x27;</span>),</span><br><span class="line">                control = list(sort=-<span class="number">1</span>))</span><br><span class="line">&gt; eclat1</span><br><span class="line">set of <span class="number">634</span> itemsets </span><br><span class="line">&gt; inspect(sort(eclat1,by=<span class="string">&#x27;support&#x27;</span>)[<span class="number">1</span>:<span class="number">10</span>])</span><br><span class="line">     items                              support    count</span><br><span class="line">[<span class="number">1</span>]  &#123;other vegetables,whole milk&#125;      <span class="number">0.07483477</span> <span class="number">736</span>  </span><br><span class="line">[<span class="number">2</span>]  &#123;rolls/buns,whole milk&#125;            <span class="number">0.05663447</span> <span class="number">557</span>  </span><br><span class="line">[<span class="number">3</span>]  &#123;whole milk,yogurt&#125;                <span class="number">0.05602440</span> <span class="number">551</span>  </span><br><span class="line">[<span class="number">4</span>]  &#123;root vegetables,whole milk&#125;       <span class="number">0.04890696</span> <span class="number">481</span>  </span><br><span class="line">[<span class="number">5</span>]  &#123;other vegetables,root vegetables&#125; <span class="number">0.04738180</span> <span class="number">466</span>  </span><br><span class="line">[<span class="number">6</span>]  &#123;other vegetables,yogurt&#125;          <span class="number">0.04341637</span> <span class="number">427</span>  </span><br><span class="line">[<span class="number">7</span>]  &#123;other vegetables,rolls/buns&#125;      <span class="number">0.04260295</span> <span class="number">419</span>  </span><br><span class="line">[<span class="number">8</span>]  &#123;tropical fruit,whole milk&#125;        <span class="number">0.04229792</span> <span class="number">416</span>  </span><br><span class="line">[<span class="number">9</span>]  &#123;soda,whole milk&#125;                  <span class="number">0.04006101</span> <span class="number">394</span>  </span><br><span class="line">[<span class="number">10</span>] &#123;rolls/buns,soda&#125;                  <span class="number">0.03833249</span> <span class="number">377</span>    </span><br><span class="line"></span><br><span class="line">&gt; groceryrules</span><br><span class="line">set of <span class="number">463</span> rules</span><br><span class="line">&gt; inspect(sort(groceryrules,by=<span class="string">&#x27;support&#x27;</span>)[<span class="number">1</span>:<span class="number">10</span>])</span><br><span class="line">     lhs                   rhs                support    confidence lift     count </span><br><span class="line">[<span class="number">1</span>]  &#123;other vegetables&#125; =&gt; &#123;whole milk&#125;       <span class="number">0.07483477</span> <span class="number">0.3867578</span>  <span class="number">1.513634</span> <span class="number">736</span>    </span><br><span class="line">[<span class="number">2</span>]  &#123;whole milk&#125;       =&gt; &#123;other vegetables&#125; <span class="number">0.07483477</span> <span class="number">0.2928770</span>  <span class="number">1.513634</span> <span class="number">736</span>    </span><br><span class="line">[<span class="number">3</span>]  &#123;rolls/buns&#125;       =&gt; &#123;whole milk&#125;       <span class="number">0.05663447</span> <span class="number">0.3079049</span>  <span class="number">1.205032</span> <span class="number">557</span>    </span><br><span class="line">[<span class="number">4</span>]  &#123;yogurt&#125;           =&gt; &#123;whole milk&#125;       <span class="number">0.05602440</span> <span class="number">0.4016035</span>  <span class="number">1.571735</span> <span class="number">551</span>    </span><br><span class="line">[<span class="number">5</span>]  &#123;root vegetables&#125;  =&gt; &#123;whole milk&#125;       <span class="number">0.04890696</span> <span class="number">0.4486940</span>  <span class="number">1.756031</span> <span class="number">481</span>    </span><br><span class="line">[<span class="number">6</span>]  &#123;root vegetables&#125;  =&gt; &#123;other vegetables&#125; <span class="number">0.04738180</span> <span class="number">0.4347015</span>  <span class="number">2.246605</span> <span class="number">466</span>   </span><br><span class="line">[<span class="number">7</span>]  &#123;yogurt&#125;           =&gt; &#123;other vegetables&#125; <span class="number">0.04341637</span> <span class="number">0.3112245</span>  <span class="number">1.608457</span> <span class="number">427</span>    </span><br><span class="line">[<span class="number">8</span>]  &#123;tropical fruit&#125;   =&gt; &#123;whole milk&#125;       <span class="number">0.04229792</span> <span class="number">0.4031008</span>  <span class="number">1.577595</span> <span class="number">416</span>   </span><br><span class="line">[<span class="number">9</span>]  &#123;tropical fruit&#125;   =&gt; &#123;other vegetables&#125; <span class="number">0.03589222</span> <span class="number">0.3420543</span>  <span class="number">1.767790</span> <span class="number">353</span>   </span><br><span class="line">[<span class="number">10</span>] &#123;bottled water&#125;    =&gt; &#123;whole milk&#125;       <span class="number">0.03436706</span> <span class="number">0.3109476</span>  <span class="number">1.216940</span> <span class="number">338</span>   </span><br></pre></td></tr></table></figure>
<p>eclat算法与apriori的本质区别就是不能输出关联规则,只能提供各种商品组合及其对应的支持度<br>其支持度结果跟apriori rules的基本一致,但eclat将重复的项集进行了归并.例如:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; inspect(sort(groceryrules,by=<span class="string">&#x27;support&#x27;</span>)[<span class="number">1</span>:<span class="number">10</span>])</span><br><span class="line">     lhs                   rhs                support    confidence lift     count </span><br><span class="line">[<span class="number">1</span>]  &#123;other vegetables&#125; =&gt; &#123;whole milk&#125;       <span class="number">0.07483477</span> <span class="number">0.3867578</span>  <span class="number">1.513634</span> <span class="number">736</span>    </span><br><span class="line">[<span class="number">2</span>]  &#123;whole milk&#125;       =&gt; &#123;other vegetables&#125; <span class="number">0.07483477</span> <span class="number">0.2928770</span>  <span class="number">1.513634</span> <span class="number">736</span> </span><br></pre></td></tr></table></figure>
<p>这两条就被合并成了一个项集</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; inspect(sort(eclat1,by=<span class="string">&#x27;support&#x27;</span>)[<span class="number">1</span>:<span class="number">10</span>])</span><br><span class="line">     items                              support    count</span><br><span class="line">[<span class="number">1</span>]  &#123;other vegetables,whole milk&#125;      <span class="number">0.07483477</span> <span class="number">736</span>  </span><br></pre></td></tr></table></figure>
<p>所以如果单单是寻找捆绑销售的组合,可以只用eclat算法,简单高效</p>
<h3 id="实际案例-1-假如我们作为商场经理想要促销chocolate，该如何做-捆绑促销-？"><a href="#实际案例-1-假如我们作为商场经理想要促销chocolate，该如何做-捆绑促销-？" class="headerlink" title="实际案例: 1. 假如我们作为商场经理想要促销chocolate，该如何做(捆绑促销)？"></a>实际案例: 1. 假如我们作为商场经理想要促销chocolate，该如何做(捆绑促销)？</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## --- way1</span></span><br><span class="line">&gt; eclat1 &lt;- eclat(groceries,</span><br><span class="line">                parameter = list(minlen=<span class="number">2</span>,maxlen=<span class="number">3</span>,</span><br><span class="line">                                 support=<span class="number">0.006</span>,target = <span class="string">&#x27;frequent itemsets&#x27;</span>),</span><br><span class="line">                control = list(sort=-<span class="number">1</span>))</span><br><span class="line">&gt; choco_Sales &lt;- subset(sort(eclat1,by=<span class="string">&#x27;support&#x27;</span>),items %<span class="keyword">in</span>% c(<span class="string">&#x27;chocolate&#x27;</span>))</span><br><span class="line">&gt; inspect(choco_Sales[<span class="number">1</span>:<span class="number">6</span>])</span><br><span class="line">    items                        support     count</span><br><span class="line">[<span class="number">1</span>] &#123;chocolate,whole milk&#125;       <span class="number">0.016675140</span> <span class="number">164</span>  </span><br><span class="line">[<span class="number">2</span>] &#123;chocolate,soda&#125;             <span class="number">0.013523132</span> <span class="number">133</span>  </span><br><span class="line">[<span class="number">3</span>] &#123;chocolate,other vegetables&#125; <span class="number">0.012709710</span> <span class="number">125</span>  </span><br><span class="line">[<span class="number">4</span>] &#123;chocolate,rolls/buns&#125;       <span class="number">0.011794611</span> <span class="number">116</span>  </span><br><span class="line">[<span class="number">5</span>] &#123;chocolate,yogurt&#125;           <span class="number">0.009252669</span>  <span class="number">91</span>  </span><br><span class="line">[<span class="number">6</span>] &#123;chocolate,tropical fruit&#125;   <span class="number">0.008134215</span>  <span class="number">80</span>   </span><br><span class="line"><span class="comment">## --- way2</span></span><br><span class="line">&gt; choco_apriori=apriori(groceries,parameter=list(support=<span class="number">0.006</span>,</span><br><span class="line">                                               confidence=<span class="number">0.01</span>,</span><br><span class="line">                                               minlen=<span class="number">2</span>,</span><br><span class="line">                                               maxlen=<span class="number">3</span>),</span><br><span class="line">             appearance=list(rhs=<span class="string">&quot;chocolate&quot;</span>,default=<span class="string">&quot;lhs&quot;</span>))</span><br><span class="line">&gt; inspect(sort(choco_apriori,by=c(<span class="string">&#x27;support&#x27;</span>,<span class="string">&#x27;confidence&#x27;</span>))[<span class="number">1</span>:<span class="number">6</span>])</span><br><span class="line">    lhs                   rhs         support     confidence lift    </span><br><span class="line">[<span class="number">1</span>] &#123;whole milk&#125;       =&gt; &#123;chocolate&#125; <span class="number">0.016675140</span> <span class="number">0.06526064</span> <span class="number">1.315243</span></span><br><span class="line">[<span class="number">2</span>] &#123;soda&#125;             =&gt; &#123;chocolate&#125; <span class="number">0.013523132</span> <span class="number">0.07755102</span> <span class="number">1.562939</span></span><br><span class="line">[<span class="number">3</span>] &#123;other vegetables&#125; =&gt; &#123;chocolate&#125; <span class="number">0.012709710</span> <span class="number">0.06568576</span> <span class="number">1.323810</span></span><br><span class="line">[<span class="number">4</span>] &#123;rolls/buns&#125;       =&gt; &#123;chocolate&#125; <span class="number">0.011794611</span> <span class="number">0.06412383</span> <span class="number">1.292332</span></span><br><span class="line">[<span class="number">5</span>] &#123;yogurt&#125;           =&gt; &#123;chocolate&#125; <span class="number">0.009252669</span> <span class="number">0.06632653</span> <span class="number">1.336724</span></span><br><span class="line">[<span class="number">6</span>] &#123;shopping bags&#125;    =&gt; &#123;chocolate&#125; <span class="number">0.008134215</span> <span class="number">0.08255934</span> <span class="number">1.663875</span></span><br></pre></td></tr></table></figure>
<p>一般情况下会按照支持度最大的组合选择,但视每个活动的具体情况而定,比如上次已经采用了某一组合,这次想测试下新的组合的营销效果</p>
<h2 id="购物篮分析应注意的事项"><a href="#购物篮分析应注意的事项" class="headerlink" title="购物篮分析应注意的事项"></a>购物篮分析应注意的事项</h2><ol>
<li>如果对于大零售超市或商场，其SKU数一般都是几十万甚至上百万，产品梳理工作是一项很痛苦的工作，但如果要从数据角度进行产品运营，建议可以开展相应的产品梳理咨询项目，通过半年多的产品梳理，形成标准化的产品梳理流程及产品目录。过去的半年里，在对某商场的产品梳理时候，发现目前的产品体系还是漏洞百出，很多还是很不规范的。做好关联分析 或数据运营，请从产品梳理工作开始</li>
<li>注意购买产品赠送礼品的人为因素影响规则。有些挖掘师或分析师在做出关联分析后，看到了几条提升度及置信度都很高的规则，就兴奋不已地告诉客户：我觉得产品A和产品B有很大的关联性，从数字上看，捆绑销售肯定能够取得很好的销售效果。当拿到这样的结果的时候，客户很镇定地说：“你不知道我们在某月的时候，大量开展了购买产品A即可免费赠送产品B的活动么？”杯具，坑爹。对于这个时候的挖掘师是很悲催的。在筛选关联规则的时候，必须对该企业过去一年开展的活动有了解，还必须对不同时间段的主推产品进行提前沟通，确保关联规则不受人为因素影响。</li>
<li>注意产品之间的位置摆放是否有很大的影响。在零售大商场中，产品摆放的位置对产品关联销售会产生很大的影响的，因为关联分析就是为了更方便地让顾客找到其需要的产品，购买更多其需要的产品。人流较大的两个相隔货架之间的产品关联性比较大，在我们项目中会发现不少的这样规则。但其结果表明了货架关联性比较大，摆放在一起就肯定比较合理的。但在进行关联分析的时候，客户更希望能从其他不相隔的货架之间找出更好的关联销售机会，这决定了后期的关联规则挑选难题。</li>
<li>注意关联推荐的规则合理性及流失成本的大小。后期的关联推荐应用于主要是三个方面：1、重购：继续购买原来的产品；2、升级：购买更高档次的产品；3、交叉销售：购买相关的产品。如果该规则的客户本来是买了50块钱的产品的，发现关联规则里面出现了推荐其购买30块的同类型产品，这等于给客户降档推荐了，会让销售额大幅减少，销售机会白白浪费并且造成了损失，所以在进行关联推荐的时候，那些涉及到了降档的规则一定要剔除</li>
</ol>
<h2 id="References"><a href="#References" class="headerlink" title="References:"></a>References:</h2><ul>
<li><a target="_blank" rel="noopener" href="http://blog.csdn.net/gjwang1983/article/details/45015203">R语言 | 关联规则</a></li>
<li><a href="">机器学习与R语言-基于关联规则的购物篮分析.P172</a></li>
<li><a target="_blank" rel="noopener" href="http://www.idatacamp.com/405.html/">用R语言进行购物篮分析</a></li>
<li><a target="_blank" rel="noopener" href="https://yq.aliyun.com/articles/89742">R语言数据挖掘-2.2购物篮分析</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/lhf-data/20537735">购物篮关联分析-R挖掘Apriori算法</a></li>
<li><a target="_blank" rel="noopener" href="https://www.douban.com/note/334094701/">R语言学习之关联规则算法</a></li>
<li><a target="_blank" rel="noopener" href="http://chuansong.me/n/339317451064">R语言如何实现关联分析</a></li>
<li><a target="_blank" rel="noopener" href="http://www.cnblogs.com/big-xuyue/p/3384137.html">大数据下的关联规则挖掘</a></li>
<li><a target="_blank" rel="noopener" href="http://www.17bigdata.com/%E7%94%A8modeler%E5%81%9A%E5%85%B3%E8%81%94%E5%88%86%E6%9E%90.html">用modeler做关联分析</a></li>
<li><a target="_blank" rel="noopener" href="http://www.jianshu.com/p/dc053deb94f2">数据挖掘关联分析中的支持度、置信度和提升度</a></li>
<li><a target="_blank" rel="noopener" href="http://blog.csdn.net/lwbeyond/article/details/74932996">Apriori 算法关联分析</a></li>
<li><a target="_blank" rel="noopener" href="https://www.zybuluo.com/codeep/note/163962">Cmd Markdown 公式指导手册</a></li>
</ul>

    </div>

    
    
    
        <div class="reward-container">
  <div></div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechatpay.png" alt="amjiuzi 微信支付">
        <p>微信支付</p>
      </div>
      
      <div style="display: inline-block;">
        <img src="/images/alipay.png" alt="amjiuzi 支付宝">
        <p>支付宝</p>
      </div>

  </div>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/R%E8%AF%AD%E8%A8%80/" rel="tag"># R语言</a>
              <a href="/tags/%E5%85%B3%E8%81%94%E8%A7%84%E5%88%99/" rel="tag"># 关联规则</a>
              <a href="/tags/%E8%B4%AD%E7%89%A9%E7%AF%AE%E5%88%86%E6%9E%90/" rel="tag"># 购物篮分析</a>
              <a href="/tags/apriori/" rel="tag"># apriori</a>
              <a href="/tags/eclat/" rel="tag"># eclat</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2017/11/27/specClust1/" rel="prev" title="谱聚类的R解释">
      <i class="fa fa-chevron-left"></i> 谱聚类的R解释
    </a></div>
      <div class="post-nav-item">
    <a href="/2017/12/10/CrawlFrame1/" rel="next" title="R语言爬虫项目程序结构解析">
      R语言爬虫项目程序结构解析 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8E%9F%E7%90%86%E6%A6%82%E5%BF%B5%E6%8F%8F%E8%BF%B0"><span class="nav-number">1.</span> <span class="nav-text">原理概念描述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5"><span class="nav-number">1.1.</span> <span class="nav-text">基础概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%84%E5%88%99%E7%94%9F%E6%88%90%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B"><span class="nav-number">1.2.</span> <span class="nav-text">规则生成基本流程</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B%E5%BA%94%E7%94%A8"><span class="nav-number">2.</span> <span class="nav-text">案例应用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E8%AF%BB%E5%8F%96"><span class="nav-number">2.1.</span> <span class="nav-text">数据读取</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-read-transactions-%E5%87%BD%E6%95%B0%E7%9B%B4%E6%8E%A5%E8%AF%BB%E5%8F%96"><span class="nav-number">2.1.1.</span> <span class="nav-text">1. read.transactions 函数直接读取</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-as-data-table-%E2%80%99transactions%E2%80%99-%E5%87%BD%E6%95%B0%E8%BD%AC%E5%8C%96"><span class="nav-number">2.1.2.</span> <span class="nav-text">2. as(data.table,’transactions’) 函数转化</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#2-1-%E8%8B%A5%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E6%A0%BC%E5%BC%8F%E5%A6%82%E4%B8%8A%E5%9B%BE%E6%89%80%E7%A4%BA%E4%B9%9F%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%E4%BB%A5%E4%B8%8B%E6%96%B9%E5%BC%8F%E8%AF%BB%E5%8F%96"><span class="nav-number">2.1.2.1.</span> <span class="nav-text">2.1 若数据存储格式如上图所示也可以通过以下方式读取</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-2-%E8%8B%A5%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E6%A0%BC%E5%BC%8F%E5%A6%82%E4%B8%8B%E5%9B%BE%E6%89%80%E7%A4%BA"><span class="nav-number">2.1.2.2.</span> <span class="nav-text">2.2 若数据存储格式如下图所示</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#2-2-1-list%E8%BD%AC%E5%8C%96"><span class="nav-number">2.1.2.2.1.</span> <span class="nav-text">2.2.1 list转化</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E8%AF%BB%E5%8F%96%E9%80%9F%E5%BA%A6%E6%AF%94%E8%BE%83"><span class="nav-number">2.1.3.</span> <span class="nav-text">3. 读取速度比较</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E9%9B%86%E5%8F%8A%E7%BB%9F%E8%AE%A1%E6%B1%87%E6%80%BB%E4%BF%A1%E6%81%AF%E6%9F%A5%E7%9C%8B"><span class="nav-number">2.2.</span> <span class="nav-text">数据集及统计汇总信息查看</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%9F%E8%AE%A1%E4%BF%A1%E6%81%AF%E6%9F%A5%E7%9C%8B"><span class="nav-number">2.2.1.</span> <span class="nav-text">统计信息查看</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B4%AD%E7%89%A9%E8%BD%A6%E6%95%B0%E6%8D%AE%E7%9A%84%E7%A8%80%E7%96%8F%E7%9F%A9%E9%98%B5%E5%BD%A2%E5%BC%8F%E6%9F%A5%E7%9C%8B"><span class="nav-number">2.2.2.</span> <span class="nav-text">购物车数据的稀疏矩阵形式查看</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E9%9B%86%E4%BF%A1%E6%81%AF%E8%BF%9B%E4%B8%80%E6%AD%A5%E6%9F%A5%E7%9C%8B"><span class="nav-number">2.2.3.</span> <span class="nav-text">数据集信息进一步查看</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8C%89%E6%9C%80%E5%B0%8F%E6%94%AF%E6%8C%81%E5%BA%A6%E6%9F%A5%E7%9C%8B"><span class="nav-number">2.2.4.</span> <span class="nav-text">按最小支持度查看</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8C%89%E7%85%A7%E6%94%AF%E6%8C%81%E5%BA%A6%E7%9A%84topn%E6%9F%A5%E7%9C%8B"><span class="nav-number">2.2.5.</span> <span class="nav-text">按照支持度的topn查看</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%89%E6%95%88%E6%95%B0%E6%8D%AE%E9%9B%86%E7%AD%9B%E9%80%89"><span class="nav-number">2.3.</span> <span class="nav-text">有效数据集筛选</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AD%9B%E9%80%89%E8%B4%AD%E4%B9%B0%E4%B8%A4%E4%BB%B6%E5%95%86%E5%93%81%E4%BB%A5%E4%B8%8A%E7%9A%84%E4%BA%A4%E6%98%93"><span class="nav-number">2.3.1.</span> <span class="nav-text">筛选购买两件商品以上的交易</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E4%BA%A4%E6%98%93%E6%95%B0%E6%8D%AE"><span class="nav-number">2.3.2.</span> <span class="nav-text">查看交易数据</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B3%E8%81%94%E8%A7%84%E5%88%99%E6%8C%96%E6%8E%98"><span class="nav-number">2.4.</span> <span class="nav-text">关联规则挖掘</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%84%E5%88%99%E7%BB%9F%E8%AE%A1%E6%B1%87%E6%80%BB%E4%BF%A1%E6%81%AF"><span class="nav-number">2.4.1.</span> <span class="nav-text">规则统计汇总信息</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%84%E5%88%99%E6%9F%A5%E7%9C%8B"><span class="nav-number">2.4.2.</span> <span class="nav-text">规则查看</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%89%E7%94%A8%E8%A7%84%E5%88%99%E6%8F%90%E5%8F%96"><span class="nav-number">2.5.</span> <span class="nav-text">有用规则提取</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E6%8C%89%E7%85%A7-lift-%E5%AF%B9%E8%A7%84%E5%88%99%E8%BF%9B%E8%A1%8C%E6%8E%92%E5%BA%8F"><span class="nav-number">2.5.1.</span> <span class="nav-text">1. 按照 lift 对规则进行排序</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E8%A7%84%E5%88%99%E6%90%9C%E7%B4%A2"><span class="nav-number">2.5.2.</span> <span class="nav-text">2. 规则搜索</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E9%80%9A%E8%BF%87-%E6%9D%A1%E4%BB%B6%E8%BF%90%E7%AE%97%E7%AC%A6-amp-%E6%B7%BB%E5%8A%A0-support-confidence-lift%E7%9A%84%E8%BF%87%E6%BB%A4%E6%9D%A1%E4%BB%B6"><span class="nav-number">2.5.3.</span> <span class="nav-text">3. 通过 条件运算符(&amp;, |, !) 添加 support, confidence, lift的过滤条件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-%E8%8E%B7%E5%8F%96%E5%87%BAsupport-confidence-lift%E5%A4%96%E7%9A%84%E5%85%B6%E4%BB%96%E8%AF%84%E4%BB%B7%E6%A0%87%E5%87%86"><span class="nav-number">2.5.4.</span> <span class="nav-text">4. 获取出support,confidence,lift外的其他评价标准</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%99%90%E5%88%B6%E6%8C%96%E6%8E%98%E7%9A%84item"><span class="nav-number">2.5.5.</span> <span class="nav-text">限制挖掘的item</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%9D%E5%AD%98%E6%8C%96%E6%8E%98%E7%9A%84%E7%BB%93%E6%9E%9C"><span class="nav-number">2.6.</span> <span class="nav-text">保存挖掘的结果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9B%BE%E5%BD%A2%E5%B1%95%E7%A4%BA"><span class="nav-number">2.7.</span> <span class="nav-text">图形展示</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-Scatter-Plot"><span class="nav-number">2.7.1.</span> <span class="nav-text">1. Scatter Plot</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-Grouped-Matrix"><span class="nav-number">2.7.2.</span> <span class="nav-text">2. Grouped Matrix</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-Graph"><span class="nav-number">2.7.3.</span> <span class="nav-text">3. Graph</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B4%AD%E7%89%A9%E7%AF%AE%E5%88%86%E6%9E%90%E7%9A%84%E7%BB%93%E6%9E%9C%E5%BA%94%E7%94%A8"><span class="nav-number">2.8.</span> <span class="nav-text">购物篮分析的结果应用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8eclat-%E5%87%BD%E6%95%B0%E8%8E%B7%E5%8F%96%E6%8D%86%E7%BB%91%E9%94%80%E5%94%AE%E7%9A%84%E4%BA%A7%E5%93%81%E7%BB%84%E5%90%88"><span class="nav-number">2.9.</span> <span class="nav-text">使用eclat()函数获取捆绑销售的产品组合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E9%99%85%E6%A1%88%E4%BE%8B-1-%E5%81%87%E5%A6%82%E6%88%91%E4%BB%AC%E4%BD%9C%E4%B8%BA%E5%95%86%E5%9C%BA%E7%BB%8F%E7%90%86%E6%83%B3%E8%A6%81%E4%BF%83%E9%94%80chocolate%EF%BC%8C%E8%AF%A5%E5%A6%82%E4%BD%95%E5%81%9A-%E6%8D%86%E7%BB%91%E4%BF%83%E9%94%80-%EF%BC%9F"><span class="nav-number">2.10.</span> <span class="nav-text">实际案例: 1. 假如我们作为商场经理想要促销chocolate，该如何做(捆绑促销)？</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B4%AD%E7%89%A9%E7%AF%AE%E5%88%86%E6%9E%90%E5%BA%94%E6%B3%A8%E6%84%8F%E7%9A%84%E4%BA%8B%E9%A1%B9"><span class="nav-number">3.</span> <span class="nav-text">购物篮分析应注意的事项</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#References"><span class="nav-number">4.</span> <span class="nav-text">References:</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="amjiuzi"
      src="/images/avatar1.gif">
  <p class="site-author-name" itemprop="name">amjiuzi</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">53</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">131</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/amjiuzi" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;amjiuzi" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:izuoye@qq.com" title="E-Mail → mailto:izuoye@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">amjiuzi</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

</body>
</html>
